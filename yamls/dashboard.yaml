version: "3.3"

services:
  # serves dashboard static data
  nginx-static:
    image: nginx:alpine
    container_name: et-static
    ports:
      - "8080:80"
    volumes:
      - ../static-conf/static:/srv
      - ../static-conf/nginx.conf:/etc/nginx/conf.d/default.conf

  # dashboard web app (django)
  dashboard:
    image: qobiljon/dashboard:1.2
    container_name: et-dashboard
    network_mode: host
    environment:
      STATIC_HOST: host.docker.internal
      STATIC_PORT: 8080
      POSTGRES_HOST: localhost
      POSTGRES_PORT: 5432
      POSTGRES_DBNAME: easytrack
      POSTGRES_USER: easytrack
      POSTGRES_PASSWORD: easytrack
    ports:
      - "8000:8000"